<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      function User() {
        return {
          insert: function (data) {
            return new Promise((resolve, reject) => {
              setTimeout(() => {
                resolve({ message: "saved", data: data });
              }, 1000);
            });
          },
        };
      }


      function getToDoList() {
        const tasksId = [1, 3, 5, 7, 9, 11, 13];
        const togoList = [];
        const insertUserToDB = function (params) {
          const insertResult = User.insert(params);
          let response = { status: false, result: insertResult };
          if (insertResult.message === "saved") {
            response = { status: true, result: insertResult };
          }
          return response;
        };

        tasksId.map(function (id) {
          const result = fetch(
            "https://jsonplaceholder.typicode.com/todos/" + id
          )
            .then((response) => response.json())
            .catch((error) => {
              console.log(error)
            });

          const remark = "Title " + result.title + "Write by " + result.userId;
          let status = "Not complete";
          if (result.completed === true) {
            status = "Complete";
          }

          const task = {
            id: result.id,
            userId: result.userId,
            title: result.title,
            remark: remark,
            status: status,
          };

          const savedTodo = insertUserToDB(task);
          togoList.push(savedTodo);
        });
      }

      console.log(getToDoList())
    </script>
  </body>
</html>
